const DUMMY_INFO = {
	title: "Casbah d'Alger",
	wilaya: "Alger",
	types: ["Quartiers"],
	summary:
		"La casbah d'Alger, commun\u00e9ment appel\u00e9e la Casbah (en arabe : \u0627\u0644\u0642\u0635\u0628\u0629, Al-qa\u1e63abah,  \u00ab la citadelle \u00bb) correspond \u00e0 la vieille ville ou m\u00e9dina d'Alger, capitale de l'Alg\u00e9rie, dont elle forme un quartier historique inscrit au patrimoine mondial de l'humanit\u00e9 de l'Unesco depuis 1992. Administrativement, elle est situ\u00e9e dans la commune de Casbah, au sein de la wilaya d'Alger.\nProbablement peupl\u00e9e d\u00e8s le n\u00e9olithique comme divers sites du Sahel alg\u00e9rois, les premi\u00e8res mentions de la ville remontent \u00e0 l'Antiquit\u00e9, o\u00f9 elle est d'abord un port punique, puis berb\u00e8re et enfin romain. Le cadre urbain actuel est con\u00e7u au Xe si\u00e8cle par les Berb\u00e8res sous la dynastie des Zirides, il est ensuite enrichi par les apports des autres dynasties berb\u00e8res qui dominent successivement le Maghreb central. La Casbah atteint son apog\u00e9e durant la p\u00e9riode de la r\u00e9gence d'Alger, de laquelle elle est le si\u00e8ge du pouvoir politique. Colonis\u00e9e par les Fran\u00e7ais en 1830, elle est progressivement marginalis\u00e9e car les centres de pouvoir sont d\u00e9plac\u00e9s vers la nouvelle ville. Elle occupe un r\u00f4le central pendant la guerre d'Alg\u00e9rie, servant de bastion aux ind\u00e9pendantistes du FLN. \u00c0 l'ind\u00e9pendance du pays, en 1962, elle ne retrouve pas son r\u00f4le central et redevient un espace marginalis\u00e9 de la ville.\nExemple d'architecture islamique et d'urbanisme des m\u00e9dinas arabo-berb\u00e8res, elle est aussi un symbole de la culture alg\u00e9rienne, un objet d'inspiration artistique et le si\u00e8ge d'un savoir-faire artisanal ancestral. Des acteurs locaux se battent pour faire vivre son patrimoine mat\u00e9riel et immat\u00e9riel.",
	coordinates: { lat: "36.78333", lon: "3.06028" },
	images: [
		"https://dynamic-media-cdn.tripadvisor.com/media/photo-o/1b/2e/96/b5/casbah-d-alger.jpg?w=200&h=-1&s=1",
		"https://dynamic-media-cdn.tripadvisor.com/media/photo-o/1a/f6/ee/db/default-avatar-2020-10.jpg?w=600&h=-1&s=1",
		"https://dynamic-media-cdn.tripadvisor.com/media/photo-o/13/97/56/82/avatar.jpg?w=600&h=-1&s=1",
		"https://dynamic-media-cdn.tripadvisor.com/media/photo-o/0c/25/e2/9d/gosto69.jpg?w=600&h=-1&s=1",
		"https://dynamic-media-cdn.tripadvisor.com/media/photo-o/1a/f6/ea/2e/default-avatar-2020-67.jpg?w=600&h=-1&s=1",
		"https://dynamic-media-cdn.tripadvisor.com/media/photo-s/01/8c/16/28/hananeb6.jpg?w=600&h=-1&s=1",
		"https://dynamic-media-cdn.tripadvisor.com/media/photo-o/07/94/bd/39/gaspard-h.jpg?w=600&h=-1&s=1",
		"https://dynamic-media-cdn.tripadvisor.com/media/photo-o/10/dd/8e/fd/the-beach-along-the-promenade.jpg?w=300&h=300&s=1",
		"https://dynamic-media-cdn.tripadvisor.com/media/photo-o/0a/37/e5/a7/grande-mosquee.jpg?w=300&h=300&s=1",
	],
	reviews: [
		{
			sender: "sch\u00e9 B",
			sender_image:
				"https://dynamic-media-cdn.tripadvisor.com/media/photo-o/1a/f6/de/0a/default-avatar-2020-35.jpg?w=600&h=-1&s=1",
			comment: "unique en ce genre",
		},
		{
			sender: "Razika K",
			sender_image:
				"https://dynamic-media-cdn.tripadvisor.com/media/photo-o/13/ed/a2/66/colombe915.jpg?w=600&h=-1&s=1",
			comment:
				"une visite de la casbah est une experience magnifique, on a un apercu de la vie de nos ancetres.",
		},
		{
			sender: "LILY Voyages",
			sender_image:
				"https://dynamic-media-cdn.tripadvisor.com/media/photo-o/1a/4d/89/c9/avatar.jpg?w=600&h=-1&s=1",
			comment: "Architecture mauresque",
		},
		{
			sender: "PRALONG L",
			sender_image:
				"https://dynamic-media-cdn.tripadvisor.com/media/photo-o/1a/f6/f4/5d/default-avatar-2020-32.jpg?w=600&h=-1&s=1",
			comment: "EXCELLENT JE RECOMMANDE",
		},
		{
			sender: "SHERLINE S",
			sender_image:
				"https://dynamic-media-cdn.tripadvisor.com/media/photo-o/1a/f6/eb/6d/default-avatar-2020-19.jpg?w=600&h=-1&s=1",
			comment: "Cadre sympa",
		},
		{
			sender: "blanchou i",
			sender_image:
				"https://dynamic-media-cdn.tripadvisor.com/media/photo-s/01/e6/b8/31/zaza34140.jpg?w=600&h=-1&s=1",
			comment: "Insalubre",
		},
		{
			sender: "Sylvie S",
			sender_image:
				"https://dynamic-media-cdn.tripadvisor.com/media/photo-o/1a/f6/ea/74/default-avatar-2020-68.jpg?w=600&h=-1&s=1",
			comment: "MYTHIQUE",
		},
		{
			sender: "trabdoull",
			sender_image:
				"https://dynamic-media-cdn.tripadvisor.com/media/photo-o/1c/aa/d5/f2/trabdoull.jpg?w=600&h=-1&s=1",
			comment: "\u00eatre un guide",
		},
		{
			sender: "benattou a",
			sender_image:
				"https://dynamic-media-cdn.tripadvisor.com/media/photo-o/1a/f6/e2/11/default-avatar-2020-41.jpg?w=600&h=-1&s=1",
			comment: "La vieille ville.",
		},
		{
			sender: "khaldoun",
			sender_image:
				"https://dynamic-media-cdn.tripadvisor.com/media/photo-o/1a/f6/ed/7b/default-avatar-2020-6.jpg?w=600&h=-1&s=1",
			comment: "La Casbah est un quartier historique",
		},
	],
};

import { Carousel } from "@mantine/carousel";
import { rem } from "@mantine/core";
import Image from "next/image";
import RowInfo from "./RowInfo";
import { GoLocation } from "react-icons/go";
import { CiGrid41, CiFaceSmile } from "react-icons/ci";
import { RxClock } from "react-icons/rx";
import { FiBookOpen } from "react-icons/fi";
import Ratting from "./Ratting";
import { MdExpandMore } from "react-icons/md";
import { FaRegCommentDots } from "react-icons/fa";
import { useEffect, useState } from "react";
import { motion } from "framer-motion";
import Review from "./Review";
import axios from "axios";

const InfoModal = ({ id }) => {
	const [expandHistory, setExpandHistory] = useState(false);
	const [expandReviews, setExpandReviews] = useState(false);
	const [modalData, setModalData] = useState(DUMMY_INFO);

	useEffect(() => {
		const fetchMarkers = async () => {
			try {
				const res = await axios.get(
					`http://localhost:3000/api/monuments/${id}`
				);
				setModalData(res.data.monument);
			} catch (e) {
				console.log(e);
			}
		};
		fetchMarkers();
	}, []);

	console.log("Modal data --------------------------");
	console.log(modalData);
	return (
		<motion.div
			className="mantine-carousel bg-white shadow-md h-[calc(95vh-150px)] py-5 px-2 w-[360px] rounded-3xl absolute left-4 top-28 z-50 overflow-y-scroll"
			initial={{ x: "-400px" }}
			animate={{ x: 0 }}
			transition={{ type: "spring", stiffness: 105 }}
			exit={{ x: "-400px" }}
		>
			<h1 className="text-blue text-center font-semibold text-2xl">
				{modalData.title}
			</h1>
			<h3 className="text-green font-medium text-lg text-center py-2">
				open
			</h3>
			<Carousel
				maw={300}
				mx="auto"
				withIndicators
				height={200}
				className="rounded-xl  overflow-hidden "
				styles={{
					indicator: {
						width: rem(12),
						height: rem(4),
						transition: "width 250ms ease",

						"&[data-active]": {
							width: rem(40),
						},
					},
				}}
			>
				{modalData.images.map((img, index) => (
					<Carousel.Slide key={index}>
						<Image src={img} alt="" fill />
					</Carousel.Slide>
				))}
			</Carousel>
			<div className="mt-4 ml-10 mr-5">
				<RowInfo>
					<GoLocation size={28} className="text-orange" />
					<p className="text-dark">{modalData.wilaya}</p>
				</RowInfo>
				<RowInfo>
					<CiGrid41 size={28} className="text-orange" />
					<p className="text-dark">{modalData.type}</p>
				</RowInfo>

				<RowInfo>
					<RxClock size={28} className="text-orange" />
					<p className="text-dark">Today 09:00â€“17:00</p>
				</RowInfo>

				<RowInfo>
					<FiBookOpen size={28} className="text-orange" />
					<p className="text-dark ">History</p>
					<MdExpandMore
						size={24}
						className={
							"text-dark ml-auto mr-6 cursor-pointer   transition  " +
							(expandHistory ? "rotate-180" : "")
						}
						onClick={() => setExpandHistory((prev) => !prev)}
					/>
				</RowInfo>
				{/* truncate overflow-ellipsis max-w-[200px] */}
				{expandHistory && (
					<p
						className="ml-6  text-gray-500 text-sm text-justify mb-4 cursor-pointer"
						onClick={() => setExpandHistory(false)}
					>
						{modalData.summary}
					</p>
				)}
				<RowInfo>
					<FaRegCommentDots size={28} className="text-orange" />
					<p className="text-dark ">Reviews</p>
					<MdExpandMore
						size={24}
						className={
							"text-dark ml-auto mr-6 cursor-pointer   transition  " +
							(expandReviews ? "rotate-180" : "")
						}
						onClick={() => setExpandReviews((prev) => !prev)}
					/>
				</RowInfo>
				<div className="flex justify-center">
					<Ratting num={modalData.rating} />
				</div>
				{expandReviews && (
					<div className="ml-2 mt-4">
						{modalData.reviews.map((item, index) => (
							<Review
								key={index}
								sender={item.sender}
								image={item.sender_image}
								comment={item.comment}
							/>
						))}
					</div>
				)}
			</div>
		</motion.div>
	);
};

export default InfoModal;
